{"version":3,"sources":["Assets/Images/userPhoto.jpg","Components/Users/Users.module.css","Components/Users/Paginator/Paginator.module.css","Components/Users/User/User.module.css","Components/Users/Paginator/Paginator.js","Components/Users/User/User.js","Components/Users/User/UserContainer.js","Components/Users/Users.js","Components/Users/UsersContainer.js"],"names":["module","exports","Paginator","state","inputError","displayNumber","inputMode","setInputMode","e","setState","checkDisplayValue","disableInputMode","props","startPage","finishPage","nextPage","currentTarget","value","setPageOnEvent","currentPage","dispatchNewPage","setPageOnKey","key","this","className","styles","paginatorWrapper","paginator","button","tabIndex","onClick","onKeyPress","charCode","type","min","max","inpError","onChange","onBlur","onInput","React","Component","User","setFollow","user","id","photos","followed","name","status","followInProgress","photoUrl","small","require","avatar","to","src","alt","photo","disabled","description","info","descriptionStatus","location","connect","Users","useState","setPaginator","paginatorClosed","setClosed","closeIconRef","createRef","openIconRef","useEffect","current","focus","openPaginator","closePaginator","users","isLoading","pagesCount","usersList","map","usersPage","Preloader","preloader","icon__close","ref","preventDefault","page","inList","setUsers","icon__open","lastPage","UsersContainer","usersLoading","endlessScroll","a","docEl","document","documentElement","scrollHeight","scrollTop","clientHeight","addEventListener","length","removeEventListener","pageSize"],"mappings":"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","file":"static/js/5.74b33104.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/userPhoto.5974e044.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPage\":\"Users_usersPage__mQVSZ\",\"preloader\":\"Users_preloader__3rtwY\",\"paginator\":\"Users_paginator__3rjOg\",\"icon__close\":\"Users_icon__close__2FDkP\",\"icon__open\":\"Users_icon__open__1ttd5\",\"lastPage\":\"Users_lastPage__3E52s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__2tyKK\",\"button\":\"Paginator_button__3JCI_\",\"inpError\":\"Paginator_inpError__2O9R4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__2685s\",\"avatar\":\"User_avatar__3VMDy\",\"photo\":\"User_photo__oFDBZ\",\"description\":\"User_description__YcnNY\",\"descriptionStatus\":\"User_descriptionStatus__-VyNo\",\"info\":\"User_info__1uRtW\",\"location\":\"User_location__NaYgD\"};","import React from 'react';\r\nimport styles from './Paginator.module.css'\r\n\r\n\r\n\r\nclass Paginator extends React.Component {\r\n\r\n    state = {\r\n        inputError: false,\r\n        displayNumber: null,\r\n        inputMode: false\r\n    }\r\n\r\n    componentDidMount() { this.setState({ displayNumber: this.props.currentPage }) };\r\n\r\n    setInputMode = (e) => {\r\n        this.setState({ inputMode: true })\r\n        this.checkDisplayValue(e)\r\n    }\r\n\r\n    disableInputMode = () => {\r\n        this.setState({ inputMode: false })\r\n    }\r\n\r\n    checkDisplayValue = (e) => {\r\n        const { startPage, finishPage } = this.props;\r\n        const nextPage = e.currentTarget.value;\r\n        if (nextPage >= startPage && nextPage <= finishPage) {\r\n            this.setState({ inputError: false, displayNumber: nextPage }) //получать в дисплей значение извне\r\n        } else {\r\n            this.setState({ displayNumber: nextPage }) //получать значение извне\r\n            this.setState({ inputError: true })\r\n        }\r\n    }\r\n\r\n    setPageOnEvent = (e) => {\r\n        const { startPage, finishPage, currentPage, dispatchNewPage } = this.props;\r\n        const nextPage = +e.currentTarget.value;\r\n        if (nextPage >= startPage && nextPage <= finishPage && nextPage !== currentPage) {\r\n            this.setState({ inputError: false });\r\n            dispatchNewPage(nextPage)\r\n        } else {\r\n            if (nextPage !== currentPage) this.setState({ inputError: true })\r\n        }\r\n    }\r\n\r\n    setPageOnKey = (e) => {\r\n        if (e.key === 'Enter') {\r\n            this.setPageOnEvent(e);\r\n            this.setState({ inputMode: false })\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        const { currentPage, startPage, finishPage, dispatchNewPage } = this.props\r\n\r\n        const setFirstPage = () => dispatchNewPage(startPage)\r\n        const setFirstPageKey = (e) => {\r\n            if (e.charCode === 13) dispatchNewPage(startPage)\r\n        }\r\n\r\n        const setLastPage = () => dispatchNewPage(finishPage)\r\n        const setLastPageKey = (e) => {\r\n            if (e.charCode === 13) dispatchNewPage(finishPage)\r\n        }\r\n\r\n        return (\r\n            <section className={styles.paginatorWrapper}>\r\n                <nav className={styles.paginator}>\r\n                    {currentPage !== startPage\r\n                        && <span className={styles.button} tabIndex='0'\r\n                            onClick={setFirstPage} onKeyPress={setFirstPageKey}>\r\n                                First\r\n                            </span>\r\n                    }\r\n\r\n                    {this.state.inputMode\r\n                        ? <input type='number' value={this.state.displayNumber}\r\n                            min={startPage} max={finishPage}\r\n                            className={this.state.inputError ? styles.inpError : ''}\r\n                            onClick={this.setPageOnEvent}\r\n                            onKeyPress={this.setPageOnKey}\r\n                            onChange={this.checkDisplayValue}\r\n                            onBlur={this.disableInputMode} />\r\n                        : <input type='number' value={currentPage}\r\n                            min={startPage} max={finishPage}\r\n                            onInput={this.setInputMode}\r\n                            onClick={this.setPageOnEvent} \r\n                            onChange={()=>{}}/>\r\n                    }\r\n                    {currentPage !== finishPage\r\n                        && <span className={styles.button} tabIndex='0'\r\n                            onClick={setLastPage} onKeyPress={setLastPageKey}>\r\n                                Last\r\n                            </span>\r\n                    }\r\n                </nav>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Paginator;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport styles from './User.module.css';\r\n\r\n\r\nconst User = (props) => {\r\n    const { setFollow } = props;\r\n    const { id, photos, followed, name, status, followInProgress } = props.user;\r\n    const photoUrl = photos.small !== null ? photos.small : require('../../../Assets/Images/userPhoto.jpg');\r\n\r\n    const setFollowOnClick = () => setFollow(id, true)\r\n    const setUnfollowOnClick = () => setFollow(id, false) \r\n\r\n    return (\r\n        <section className={styles.user} >\r\n            <section className={styles.avatar}>\r\n                <NavLink to={'/profile/' + id}>\r\n                    <img src={photoUrl} alt='avatar' className={styles.photo} />\r\n                </NavLink>\r\n                {followed\r\n                    ? <button onClick={setUnfollowOnClick} disabled={followInProgress} >Unfollow</button>\r\n                    : <button onClick={setFollowOnClick} disabled={followInProgress} >Follow</button>}\r\n            </section>\r\n            <section className={styles.description}>\r\n                <div className={styles.info}>\r\n                    <p>{name}</p>\r\n                    <p className={styles.descriptionStatus}>{status}</p>\r\n                </div>\r\n                <div className={styles.location}>\r\n                    <p>{'country'},</p>\r\n                    <p>{'city'}</p>\r\n                </div>\r\n            </section>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default User;","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport User from './User';\r\nimport { setFollow } from '../../../Redux/usersReducer'\r\n\r\nconst UserContainer = (props) => {\r\n    return (\r\n        <User { ...props } />\r\n    )\r\n}\r\n\r\nexport default connect(null, { setFollow } )(UserContainer);","import React, { useState, useEffect } from 'react';\r\nimport styles from './Users.module.css';\r\nimport Paginator from './Paginator/Paginator';\r\nimport Preloader from '../Common/Preloader/Preloader';\r\nimport UserContainer from './User/UserContainer';\r\n\r\n\r\nconst Users = (props) => {\r\n\r\n    const [paginator, setPaginator] = useState(false)\r\n    const [paginatorClosed, setClosed] = useState(false)\r\n    \r\n    const closeIconRef = React.createRef()\r\n    const openIconRef = React.createRef()\r\n\r\n    useEffect( () => {\r\n        if (paginator) closeIconRef.current.focus()\r\n        if(!paginator && paginatorClosed) {\r\n            openIconRef.current.focus()\r\n            setClosed(false)\r\n        }\r\n    }, [paginator, closeIconRef, openIconRef, paginatorClosed])\r\n\r\n    const setPageOnEvent = (page, inList) => {\r\n        if (page !== props.currentPage) {\r\n            props.setUsers(page, inList);\r\n        }\r\n    }\r\n\r\n    const openPaginator = () => setPaginator(true)\r\n    \r\n    const closePaginator = () => {\r\n        setPaginator(false)\r\n        setClosed(true)\r\n    }\r\n\r\n    const openPaginatorKey = (e) => {\r\n        e.preventDefault();\r\n        if (e.charCode === 32 || e.charCode === 13) openPaginator()\r\n    }\r\n    \r\n    const closePaginatorKey = (e) => {\r\n        e.preventDefault();\r\n        if (e.charCode === 27 || e.charCode === 13) closePaginator()\r\n    }\r\n\r\n\r\n    const { users, isLoading, currentPage, pagesCount } = props;\r\n    \r\n    const usersList = users.map((user) =>\r\n        <UserContainer user={user} key={user.id} />);\r\n\r\n    return (\r\n        <div className={styles.usersPage}>\r\n            {isLoading && <Preloader className={styles.preloader} />}\r\n            {paginator\r\n                ? <div className={styles.paginator}>\r\n                    <div className={styles.icon__close} ref={closeIconRef} tabIndex='0'\r\n                        onClick={closePaginator} onKeyPress={closePaginatorKey} ></div>\r\n                    <Paginator\r\n                        startPage={1} finishPage={pagesCount}\r\n                        currentPage={currentPage} dispatchNewPage={setPageOnEvent} />\r\n\r\n                </div>\r\n                : <div className={`${styles.paginator} ${styles.icon__open}`} ref={openIconRef}\r\n                        onClick={openPaginator} onKeyPress={openPaginatorKey} tabIndex='0'>\r\n                </div>\r\n            }\r\n\r\n            {usersList}\r\n            {currentPage === pagesCount\r\n                && <div className={styles.lastPage}>You have reached the last page...</div>}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Users;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setUsers } from '../../Redux/usersReducer';\r\nimport Users from './Users';\r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n    componentDidMount() {\r\n        document.addEventListener('scroll', this.endlessScroll)\r\n        if (this.props.users.length === 0) this.props.setUsers(this.props.currentPage)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('scroll', this.endlessScroll)\r\n    }\r\n\r\n    state = {\r\n        usersLoading: false\r\n    }\r\n\r\n    endlessScroll = async() => {\r\n        \r\n        const { currentPage, pagesCount, setUsers } = this.props;\r\n        const { usersLoading } = this.state;\r\n        const docEl = document.documentElement;\r\n        const scrollBottom = docEl.scrollHeight - docEl.scrollTop - docEl.clientHeight;\r\n        if (scrollBottom < 100 && currentPage < pagesCount && !usersLoading) {\r\n            this.setState({ usersLoading : true }); \r\n            await setUsers(currentPage + 1, true);\r\n            this.setState({ usersLoading: false })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Users {...this.props} />\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        users: state.usersPage.users,\r\n        pageSize: state.usersPage.pageSize,\r\n        currentPage: state.usersPage.currentPage,\r\n        pagesCount: state.usersPage.pagesCount,\r\n        isLoading: state.usersPage.isLoading\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, { setUsers } )(UsersContainer);"],"sourceRoot":""}